<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • eatPlot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eatPlot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9030</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/bt22_plots.html">BT 22 example plots</a></li>
    <li><a class="dropdown-item" href="../articles/data_preperation.html">Data Preperation</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/plot_settings.html">Plot settings</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Getting Started</h1>
            
      

      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nickhaf.github.io/eatPlot/">eatPlot</a></span><span class="op">)</span></span></code></pre></div>
<p><code>eatPlot</code> takes output data frames from
<code>eatRep</code> and facilitates the construction of different
<code>ggplot2</code>-plots for the data. Main goal is the plotting of
BT22 graphs, but in general the package can be used for other purposes
as well. The package’s aim is it to make the plotting as easy but
flexible as possible, so let’s dive right in!</p>
<div class="section level2">
<h2 id="basic-workflow">Basic workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<div class="section level3">
<h3 id="data-preperation">Data preperation<a class="anchor" aria-label="anchor" href="#data-preperation"></a>
</h3>
<p>The first step is the data preparation. This is handled by the
function <code><a href="../reference/prep_plot.html">prep_plot()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_plot.html">prep_plot</a></span><span class="op">(</span><span class="va">trend_books</span>,</span>
<span>  competence <span class="op">=</span> <span class="st">"GL"</span>,</span>
<span>  grouping_vars <span class="op">=</span> <span class="st">"KBuecher_imp3"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The only thing that needs to be done in this step is to define the
columns in your data set (here named “trend_books”), if they differ from
the defaults.</p>
<p>The result is a list consisting of different data frames, each data
frame containing the prepared data for a different plot type. Normally,
you don’t have to look at this list, but in some cases you might want to
edit the data by hand to fit your purpose.</p>
<p>This concludes the basic data preparation workflow. Consult
<code><a href="../articles/data_preperation.html">vignette("data_preperation")</a></code> or <code><a href="../reference/prep_plot.html">prep_plot()</a></code>
for further information.</p>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<p>Different predefined plot types stemming from the BT22 graphs are
available. In general, the <code>eatPlot</code>-functions can also be
combined to create additional plots, however, the functions have been
optimized in regards to the BT22-needs. Each plot function consists of
two parts:</p>
<ol style="list-style-type: decimal">
<li>The function arguments, which mainly specify the data columns that
should be plotted.</li>
<li>An additional argument called <code>plot_settings</code>, which
takes a plot settings function, used for specifying graphical features
like colours, font sizes etc.</li>
</ol>
<div class="section level4">
<h4 id="plot-settings">Plot settings<a class="anchor" aria-label="anchor" href="#plot-settings"></a>
</h4>
<p>Plot settings can be defined by a list with a specific format, which
is generated by <code><a href="../reference/plotsettings_lineplot.html">plotsettings_lineplot()</a></code> or
<code>plotesettings_tablebarplot()</code>. Additionally, multiple
default lists for different plot types have already been built and are
included within <code>eatPlot</code>. See
<code><a href="../articles/plot_settings.html">vignette("plot_settings")</a></code> for further instructions on
altering your own plots.</p>
</div>
<div class="section level4">
<h4 id="lineplots">Lineplots<a class="anchor" aria-label="anchor" href="#lineplots"></a>
</h4>
<p>Line plots are plotted using the <code><a href="../reference/plot_lineplot.html">plot_lineplot()</a></code>
function. Input data is the list of data.frames prepared by
<code><a href="../reference/prep_plot.html">prep_plot()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_lineplot.html">plot_lineplot</a></span><span class="op">(</span><span class="va">dat_plot</span>,</span>
<span>  years_lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">2016</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2021</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  years_braces <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">2016</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2021</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/unnamed-chunk-3-1.png" width="700">
As we can see, the line plot doesn’t look optimal yet. However, we can
provide the predefined plotsettings-list to get the anticipated
result:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_lineplot.html">plot_lineplot</a></span><span class="op">(</span><span class="va">dat_plot</span>,</span>
<span>  years_lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">2016</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2021</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  years_braces <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">2016</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2021</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  plot_settings <span class="op">=</span> <span class="va">lineplot_4x4</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>The plots might still look a bit distorted, as they are optimized for
the saved pdf file. You can save the plot by using
<code><a href="../reference/save_plot.html">save_plot()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/save_plot.html">save_plot</a></span><span class="op">(</span><span class="va">p1</span>, filename <span class="op">=</span> <span class="st">"./p1.pdf"</span><span class="op">)</span></span></code></pre></div>
<p>This already sets the correct widths and heights for the final
output.</p>
</div>
<div class="section level4">
<h4 id="tables-and-barplots">Tables and barplots<a class="anchor" aria-label="anchor" href="#tables-and-barplots"></a>
</h4>
<p>As often both tables and bar plots need to be combined to the same
plot, the function <code><a href="../reference/plot_tablebar.html">plot_tablebar()</a></code> is responsible for both
operations.</p>
<p>The function takes either the whole list-object generated by
<code><a href="../reference/prep_plot.html">prep_plot()</a></code> or the according data frame
<code>plot_tablebar</code>. This way, you can extract and edit the
<code>plot_tablebar</code> data frame yourself.</p>
<p>When we have cleaned our data, we can plot a tablebarplot by
providing variables that should be plotted as table columns, as well as
the headers, and default settings (if needed).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">dat_plot</span><span class="op">$</span><span class="va">plot_tablebar</span>, <span class="va">grouping_var</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bartable_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tablebar.html">plot_tablebar</a></span><span class="op">(</span></span>
<span>  dat <span class="op">=</span> <span class="va">dat_plot</span>,</span>
<span>  bar_est <span class="op">=</span> <span class="st">"est_Trend_Comp_crossDiff_wholeGroup_20162021"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Land"</span>, <span class="st">"Wert"</span>, <span class="st">"Bar"</span><span class="op">)</span>,</span>
<span>  columns_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state_var"</span>, <span class="st">"est_noTrend_noComp_2016"</span><span class="op">)</span>,</span>
<span>  y_axis <span class="op">=</span> <span class="st">"state_var"</span>,</span>
<span>  plot_settings <span class="op">=</span> <span class="fu"><a href="../reference/plotsettings_tablebarplot.html">plotsettings_tablebarplot</a></span><span class="op">(</span></span>
<span>    axis_x_lims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>    columns_alignment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    columns_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.7</span><span class="op">)</span>,</span>
<span>    default_list <span class="op">=</span> <span class="va">barplot_plot_frame</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that we have to change the column alignment here, so the column
values are aligned correctly, and that we have to change the column
width, if we don’t want all columns to have the same size.</p>
</div>
<div class="section level4">
<h4 id="combining-tables-and-barplots">Combining tables and barplots<a class="anchor" aria-label="anchor" href="#combining-tables-and-barplots"></a>
</h4>
<p>Currently, <code>eatPlot</code> only supports the generation of a
table with the desired number of columns, and one bar plot on the right
side of the table. For very complex plots, different plots have to be
combined to achieve the desired output.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bartable_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tablebar.html">plot_tablebar</a></span><span class="op">(</span></span>
<span>  dat <span class="op">=</span> <span class="va">dat_plot</span>,</span>
<span>  bar_est <span class="op">=</span> <span class="st">"est_Trend_Comp_crossDiff_wholeGroupSameGroup_20162021"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Wert"</span>, <span class="st">"Bar"</span><span class="op">)</span>,</span>
<span>  columns_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est_noTrend_noComp_2021"</span><span class="op">)</span>,</span>
<span>  y_axis <span class="op">=</span> <span class="st">"state_var"</span>,</span>
<span>  plot_settings <span class="op">=</span> <span class="fu"><a href="../reference/plotsettings_tablebarplot.html">plotsettings_tablebarplot</a></span><span class="op">(</span></span>
<span>    axis_x_lims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>    columns_alignment <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    columns_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>    default_list <span class="op">=</span> <span class="va">barplot_plot_frame</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Sometimes the alignment of the columns can be a bit tricky, then you
have to play around with the <code>columns_alignment</code>,
<code>columns_width</code> and <code>columns_nudge</code> settings.</p>
<p>The two plots can be combined into one by
<code><a href="../reference/combine_plots.html">combine_plots()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/combine_plots.html">combine_plots</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">bartable_1</span>, <span class="va">bartable_2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 2 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_rect()`).</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicklas Hafiz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
